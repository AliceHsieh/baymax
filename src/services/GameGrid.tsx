import * as _ from "lodash";

export enum Entity {
	OBSTRUCTED,
	UNOBSTRUCTED,
	WINDMILL,
	REACTOR,
	PYLON,
	TREE,
	ORCHARD,
	FARM,
	MINE,
	FORGE,
	FACTORY,
	HOSPITAL,
	WEAPON,
	GREENHOUSE,
	VAULT,
}

export enum GridMode {
	VIEW_MODE,
	BUILD_MODE,
	DELETE_MODE,
}

export type IGrid = ITile[][];

export interface ICoordinate {
	x: number;
	y: number;
}

export interface ITile {
	occupied: boolean;
	parentNodeCoordinate?: ICoordinate;
	isParent: boolean;
	entity: Entity;
	gridMode: GridMode;
	coordinate: ICoordinate;
	selected: boolean;
}

function createDefaultGrid(): IGrid {
	const defaultGrid: IGrid = [];
	const width: number = 100;
	const height: number = 5;

	let x: number;
	let y: number;
	for (x = 0; x < width; x++) {
		defaultGrid.push([]);
		for (y = 0; y < height; y++) {
			defaultGrid[x].push({
				occupied: false,
				entity: Entity.UNOBSTRUCTED,
				gridMode: GridMode.VIEW_MODE,
				isParent: true,
				coordinate: {
					x,
					y,
				},
				selected: false,
			});
		}
	}

	let coordinate: ICoordinate;
	for (coordinate of obstructedArray) {
		defaultGrid[coordinate.x][coordinate.y].entity = Entity.OBSTRUCTED;
	}

	return defaultGrid;
}

const obstructedArray: ICoordinate[] = [
	{x: 0, y: 0},
	{x: 0, y: 1},
	{x: 1, y: 0},
	{x: 1, y: 1},
	{x: 1, y: 3},
	{x: 1, y: 4},
	{x: 2, y: 1},
	{x: 2, y: 3},
	{x: 2, y: 4},
	{x: 2, y: 2},
	{x: 3, y: 1},
	{x: 3, y: 2},
	{x: 3, y: 3},
	{x: 4, y: 2},
	{x: 4, y: 3},
	{x: 3, y: 4},
	{x: 8, y: 4},
	{x: 9, y: 1},
	{x: 9, y: 0},
	{x: 9, y: 3},
	{x: 9, y: 4},
	{x: 10, y: 3},
	{x: 10, y: 4},
	{x: 11, y: 4},
	{x: 12, y: 4},
	{x: 13, y: 4},
	{x: 14, y: 3},
	{x: 14, y: 4},
	{x: 15, y: 3},
	{x: 15, y: 4},
	{x: 16, y: 4},
	{x: 16, y: 3},
	{x: 17, y: 4},
	{x: 18, y: 3},
	{x: 18, y: 4},
	{x: 19, y: 3},
	{x: 19, y: 4},
	{x: 20, y: 4},
	{x: 20, y: 3},
	{x: 21, y: 2},
	{x: 21, y: 3},
	{x: 21, y: 4},
	{x: 22, y: 3},
	{x: 22, y: 4},
	{x: 23, y: 3},
	{x: 23, y: 4},
	{x: 24, y: 3},
	{x: 24, y: 4},
	{x: 25, y: 3},
	{x: 25, y: 4},
	{x: 26, y: 3},
	{x: 26, y: 4},
	{x: 27, y: 3},
	{x: 27, y: 4},
	{x: 28, y: 4},
	{x: 29, y: 3},
	{x: 29, y: 4},
	{x: 30, y: 4},
	{x: 31, y: 3},
	{x: 31, y: 4},
	{x: 32, y: 3},
	{x: 32, y: 4},
	{x: 33, y: 1},
	{x: 34, y: 0},
	{x: 34, y: 1},
	{x: 35, y: 0},
	{x: 33, y: 2},
	{x: 33, y: 3},
	{x: 33, y: 4},
	{x: 34, y: 2},
	{x: 34, y: 3},
	{x: 34, y: 4},
	{x: 35, y: 0},
	{x: 35, y: 3},
	{x: 35, y: 4},
	{x: 38, y: 2},
	{x: 38, y: 3},
	{x: 38, y: 4},
	{x: 39, y: 2},
	{x: 39, y: 3},
	{x: 39, y: 4},
	{x: 40, y: 2},
	{x: 40, y: 3},
	{x: 40, y: 4},
	{x: 41, y: 2},
	{x: 41, y: 3},
	{x: 41, y: 4},
	{x: 42, y: 3},
	{x: 42, y: 4},
	{x: 43, y: 3},
	{x: 43, y: 4},
	{x: 47, y: 2},
	{x: 48, y: 1},
	{x: 48, y: 2},
	{x: 49, y: 1},
	{x: 49, y: 2},
	{x: 51, y: 0},
	{x: 51, y: 1},
	{x: 51, y: 3},
	{x: 51, y: 4},
	{x: 52, y: 0},
	{x: 52, y: 1},
	{x: 52, y: 3},
	{x: 52, y: 0},
	{x: 52, y: 4},
	{x: 53, y: 0},
	{x: 53, y: 4},
	{x: 54, y: 0},
	{x: 54, y: 1},
	{x: 54, y: 2},
	{x: 54, y: 3},
	{x: 54, y: 4},
	{x: 55, y: 0},
	{x: 55, y: 1},
	{x: 55, y: 2},
	{x: 55, y: 3},
	{x: 55, y: 4},
	{x: 56, y: 0},
	{x: 56, y: 1},
	{x: 56, y: 2},
	{x: 56, y: 3},
	{x: 56, y: 4},
	{x: 57, y: 0},
	{x: 57, y: 1},
	{x: 57, y: 2},
	{x: 57, y: 3},
	{x: 57, y: 4},
	{x: 58, y: 1},
	{x: 58, y: 2},
	{x: 58, y: 3},
	{x: 58, y: 4},
	{x: 59, y: 1},
	{x: 59, y: 2},
	{x: 59, y: 3},
	{x: 59, y: 4},
	{x: 60, y: 2},
	{x: 60, y: 3},
	{x: 60, y: 4},
	{x: 61, y: 2},
	{x: 61, y: 3},
	{x: 61, y: 4},
	{x: 62, y: 3},
	{x: 62, y: 4},
	{x: 63, y: 3},
	{x: 63, y: 4},
	{x: 64, y: 4},
	{x: 70, y: 0},
	{x: 70, y: 1},
	{x: 70, y: 2},
	{x: 71, y: 0},
	{x: 71, y: 1},
	{x: 71, y: 2},
	{x: 72, y: 0},
	{x: 72, y: 1},
	{x: 72, y: 2},
	{x: 73, y: 0},
	{x: 73, y: 1},
	{x: 73, y: 2},
	{x: 74, y: 0},
	{x: 74, y: 1},
	{x: 74, y: 2},
	{x: 74, y: 3},
	{x: 74, y: 4},
	{x: 75, y: 0},
	{x: 75, y: 1},
	{x: 75, y: 2},
	{x: 75, y: 3},
	{x: 75, y: 4},
	{x: 76, y: 0},
	{x: 76, y: 1},
	{x: 76, y: 2},
	{x: 76, y: 3},
	{x: 76, y: 4},
	{x: 77, y: 0},
	{x: 77, y: 1},
	{x: 77, y: 2},
	{x: 77, y: 3},
	{x: 77, y: 4},
	{x: 78, y: 0},
	{x: 78, y: 1},
	{x: 78, y: 2},
	{x: 78, y: 3},
	{x: 78, y: 4},
	{x: 79, y: 0},
	{x: 79, y: 1},
	{x: 80, y: 0},
	{x: 80, y: 1},
	{x: 80, y: 3},
	{x: 80, y: 4},
	{x: 81, y: 0},
	{x: 81, y: 1},
	{x: 81, y: 2},
	{x: 81, y: 3},
	{x: 81, y: 4},
	{x: 82, y: 0},
	{x: 82, y: 1},
	{x: 82, y: 2},
	{x: 82, y: 3},
	{x: 82, y: 4},
	{x: 83, y: 0},
	{x: 83, y: 2},
	{x: 83, y: 3},
	{x: 83, y: 4},
	{x: 84, y: 0},
	{x: 84, y: 2},
	{x: 84, y: 3},
	{x: 84, y: 4},
	{x: 85, y: 3},
	{x: 85, y: 4},
	{x: 86, y: 3},
	{x: 86, y: 4},
	{x: 87, y: 3},
	{x: 87, y: 4},
	{x: 88, y: 0},
	{x: 88, y: 1},
	{x: 88, y: 2},
	{x: 88, y: 3},
	{x: 88, y: 4},
	{x: 89, y: 0},
	{x: 89, y: 1},
	{x: 89, y: 2},
	{x: 89, y: 3},
	{x: 89, y: 4},
	{x: 90, y: 0},
	{x: 90, y: 1},
	{x: 90, y: 2},
	{x: 90, y: 3},
	{x: 90, y: 4},
	{x: 91, y: 1},
	{x: 91, y: 2},
	{x: 91, y: 3},
	{x: 91, y: 4},
	{x: 92, y: 2},
	{x: 92, y: 3},
	{x: 92, y: 4},
	{x: 94, y: 4},
	{x: 95, y: 0},
	{x: 95, y: 1},
	{x: 95, y: 4},
	{x: 96, y: 0},
	{x: 96, y: 1},
	{x: 96, y: 2},
	{x: 96, y: 3},
	{x: 96, y: 4},
	{x: 97, y: 0},
	{x: 97, y: 1},
	{x: 97, y: 2},
	{x: 97, y: 3},
	{x: 97, y: 4},
	{x: 98, y: 0},
	{x: 98, y: 1},
	{x: 98, y: 2},
	{x: 98, y: 3},
	{x: 98, y: 4},
	{x: 99, y: 3},
	{x: 99, y: 4},
];

export const buildingMap: {[key: string]: any} = {
	[Entity.HOSPITAL]: require("../../assets/windmill.png"),
	[Entity.WINDMILL]: require("../../assets/windmill.png"),
};

export default createDefaultGrid();
